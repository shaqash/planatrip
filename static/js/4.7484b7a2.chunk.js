(this.webpackJsonpplanatrip=this.webpackJsonpplanatrip||[]).push([[4],{43:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(44);function c(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},44:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},45:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(43);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,c=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(s){c=!0,i=s}finally{try{r||null==o.return||o.return()}finally{if(c)throw i}}return n}}(t,e)||Object(r.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},50:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return p}));var r=n(44);var c=n(43);function i(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(c.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u=n(45),l=n(7),b=n(1),j=n.n(b),d=n(4),f=n(22);function p(){var t=Object(d.f)(),e=Object(b.useState)(!0),n=Object(u.a)(e,2),r=n[0],c=n[1],o=Object(b.useState)(null),p=Object(u.a)(o,2),O=p[0],h=p[1],v=Object(b.useState)(null),m=Object(u.a)(v,2),g=m[0],y=m[1],x=Object(d.g)().id,S=Object(b.useContext)(f.a),w=Object(b.useState)(!1),D=Object(u.a)(w,2),A=D[0],N=D[1],I=Object(b.useState)({name:"",driver:0,brings:[],drivingWith:""}),P=Object(u.a)(I,2),C=P[0],k=P[1];function E(t){var e;k(s(s({},C),{},a({},t.target.name,(e=t.target.value,"driver"===t.target.name?parseInt(e):"brings"===t.target.name?e.replace(" ","").split(","):e))))}var L,q=Object(b.useCallback)((function(){null===S||void 0===S||S.storage.collection("trips").doc(x).get().then((function(t){if(!t.exists)throw new Error("No such trip");return t})).then((function(t){return t.data()})).then((function(t){y(t)})).catch((function(t){return h(t.message)})).finally((function(){return c(!1)}))}),[null===S||void 0===S?void 0:S.storage,x]);return j.a.useEffect((function(){return q()}),[q]),Object(l.jsx)("div",{className:"App",children:Object(l.jsx)("header",{className:"App-header",children:r?Object(l.jsx)("p",{children:"Loading.."}):g&&!O?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("span",{className:"chungus",children:g.title}),Object(l.jsxs)("span",{children:[(L=g,L.participants.reduce((function(t,e){return t+e.driver-1}),0))," seats left"]}),Object(l.jsxs)("p",{children:[g.description,Object(l.jsx)("br",{}),function(t){return t.startDate&&t.endDate?"".concat(t.startDate.toDate().toLocaleDateString("he-IL"),"-").concat(t.endDate.toDate().toLocaleDateString("he-IL")):""}(g),Object(l.jsx)("br",{}),Object(l.jsx)("strong",{children:"We have"}),": ",function(t){return t.participants.reduce((function(t,e){return t.concat(e.brings)}),[]).toString()}(g),Object(l.jsx)("br",{}),Object(l.jsx)("strong",{children:"We need"}),": ",function(t){var e=t.participants.reduce((function(t,e){return t.concat(e.brings)}),[]);return t.requirements.filter((function(t){var n=e.findIndex((function(e){return e===t}));return e=[].concat(i(e.slice(0,n)),i(e.slice(n+1))),-1===n})).toString()||"Nothing more"}(g),Object(l.jsx)("br",{}),Object(l.jsx)("strong",{children:"Going"}),": ",g.participants.map((function(t){return" ".concat(t.name," ").concat(t.driver>0?"\ud83d\ude98":"")})).toString()]}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),null===S||void 0===S||S.storage.collection("trips").doc(x).update({participants:null===g||void 0===g?void 0:g.participants.concat(C)}).finally((function(){return t.push("/thanks")}))},children:[Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("input",{required:!0,onChange:E,value:C.name,name:"name",type:"text",placeholder:"Name"})}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("input",{required:!0,onChange:E,value:C.brings,name:"brings",type:"text",placeholder:"".concat(null===g||void 0===g?void 0:g.requirements.slice(0,3),"...")})}),Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{children:"Driver? "}),Object(l.jsx)("input",{name:"driver",onChange:function(){return N((function(t){return!t}))},type:"checkbox"})]}),Object(l.jsx)("div",{className:"row",style:{visibility:A?"visible":"collapse"},children:Object(l.jsx)("input",{onChange:E,name:"driver",type:"text",value:0!==C.driver?C.driver:"",placeholder:"Passengers (number)"})}),Object(l.jsx)("div",{children:Object(l.jsxs)("button",{type:"submit",children:["You son of a bitch, I'm in! ",Object(l.jsx)("span",{className:"chungus",children:"\ud83d\udc48"})]})})]})]}):Object(l.jsx)("p",{children:O||"No such trip"})})})}}}]);
//# sourceMappingURL=4.7484b7a2.chunk.js.map